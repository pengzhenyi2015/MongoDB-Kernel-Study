# 导语
分片集群的核心就在于如何在多个分片中高效地组织数据，而这一切的核心就在于路由的设计。

接下来的分析主要基于 4.2 版本内核代码，并通过附带介绍高版本特性的方式，探讨关于路由设计的一些细节问题：
1. 路由的结构：路由表中的 range ，shard 和版本，节点缓存中的 Map 结构。
2. 路由算法：Hash 和 Range.
3. 节点的路由更新算法和版本管理。
4. 路由分裂 split.
5. 高版本内核对路由更新算法的改进。

另外，关于 chunk 迁移的 balancer 流程，由于非常复杂，后面单独作为一个章节进行分析。

# 路由结构


# 分片算法 Range vs Hash


# 版本变更

# Chunk 分裂

# 路由变更算法的改进

# 总结
